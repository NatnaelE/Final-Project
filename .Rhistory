energy <- read.csv("data/FAOSTAT_data_3-7-2019.csv",stringsAsFactors = F)
energy[is.na(energy)] <- 0
years <- range(energy$Year)
countries <- unique(energy$Country)
elements <- unique(energy$Element)
items <- unique(energy$Item)
page_energy <- fluidPage(
titlePanel("the energy use in agriculture"),
sidebarLayout(
sidebarPanel(
sliderInput(
"year",
label = "choose the year range",
min = years[1],
max = years[2],
value = years,
step = 1
),
pickerInput(
"country",
label = "choose the country",
choices = countries,
selected = "Afghanistan",
options = list(`actions-box` = TRUE),
multiple = T
),
selectInput(
"element",
label = "choose the element",
choices = elements,
selected = "Consumption in Agriculture"
),
selectInput(
"item",
label = "choose the item",
choices = items,
selected = "Electricity"
)
),
mainPanel(plotOutput("trend"))
)
)
library("shiny")
library("dplyr")
library("shinyWidgets")
source("server.R")
energy <- read.csv("data/FAOSTAT_data_3-7-2019.csv",stringsAsFactors = F)
energy[is.na(energy)] <- 0
years <- range(energy$Year)
countries <- unique(energy$Country)
elements <- unique(energy$Element)
items <- unique(energy$Item)
page_energy <- fluidPage(
titlePanel("the energy use in agriculture"),
sidebarLayout(
sidebarPanel(
sliderInput(
"year",
label = "choose the year range",
min = years[1],
max = years[2],
value = years,
step = 1
),
pickerInput(
"country",
label = "choose the country",
choices = countries,
selected = "Afghanistan",
options = list(`actions-box` = TRUE),
multiple = T
),
selectInput(
"element",
label = "choose the element",
choices = elements,
selected = "Consumption in Agriculture"
),
selectInput(
"item",
label = "choose the item",
choices = items,
selected = "Electricity"
)
),
mainPanel(plotOutput("trend"))
)
)
setwd("~/Desktop/Info201/Final-Project")
setwd("~/Desktop/Info201/Final-Project")
runApp()
runApp()
test<- energy%>%
filter(Year %in% c(2000,2001,2002))%>%
filter(Element == "Consumption in Agriculture")%>%
filter(Country %in% c("Australia","China"))%>%
filter(Item == "Electricity")
test2 <- test%>%
group_by(Year)%>%
summarise(Value = sum(Value))
View(test2)
test2 <- test%>%
group_by(Year, -Unit)%>%
summarise(Value = sum(Value))
test2 <- test%>%
group_by(Year, - Unit)%>%
summarise(Value = sum(Value))
test2 <- test%>%
group_by(Year)
View(test2)
#energy <- read.csv("data/FAOSTAT_data_3-7-2019.csv",stringsAsFactors = F)
#energy[is.na(energy)] <- 0
#unique(energy$Unit)
energy <- energy %>%
filter(Unit != "million kWh")
test2 <- test%>%
gather(Year
View(test2)
test2 <- test%>%
gather(Year)
View(test2)
test<- energy%>%
filter(Year %in% c(2000,2001,2002))%>%
filter(Element == "Consumption in Agriculture")%>%
filter(Country %in% c("Australia","China"))%>%
filter(Item == "Electricity")
test
test2 <- test%>%
select(Year,Value,Unit)%>%
group_by(Year,-Unit)
runApp()
runApp()
#energy <- read.csv("data/FAOSTAT_data_3-7-2019.csv",stringsAsFactors = F)
#energy[is.na(energy)] <- 0
#unique(energy$Unit)
energy <- energy %>%
filter(Unit != "million kWh")
View(energy)
runApp()
runApp()
runApp()
#test<- energy%>%
#  filter(Year %in% c(2000,2001,2002))%>%
#  filter(Element == "Consumption in Agriculture")%>%
# filter(Country %in% c("Australia","China"))%>%
# filter(Item == "Electricity")
test
runApp()
test2 <- test%>%
select(Year,Unit)%>%
group_by(Year)
View(test2)
test2 <- test%>%
select(Year,Unit,Value)%>%
group_by(Year)
View(test2)
View(test2)
summarise(Value = sum(Value))
test2 <- test%>%
select(Year,Unit,Value)%>%
group_by(Year)
View(test2)
View(test2)
test<- energy%>%
filter(Year %in% c(2000,2001,2002))%>%
filter(Element == "Consumption in Agriculture")%>%
filter(Country %in% c("Australia","China"))%>%
filter(Item == "Electricity")
test
runApp()
library("dplyr")
library("tidyr")
library("ggplot2")
runApp()
a <- unique(test$Unit)
print(a)
is.character(a)
is.character(unique(test$Unit))
server <- function(input,output){
filtered <- reactive({
data <- energy %>%
filter(Year > input$year[1], Year < input$year[2])%>%
filter(Element == input$element)%>%
filter(Country %in% input$country)%>%
filter(Item == input$item)
data
})
unit <- unique(filtered()$Unit)
filtered_one <- reactive({
data_a <- filtered()%>%
group_by(Year)%>%
summarise(Value = sum(Value))
data_a
})
output$trend <- renderPlot({
p <- ggplot(data = filtered_one(), mapping = aes_string( x = "Year", y = "Value")) +
geom_point()+
geom_line()+
labs(title = )
p
})
}
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
years <- range(energy$Year)
years
years <- c(2009,2013)
years
years <- c(1999,2013)
page_energy <- fluidPage(
titlePanel("the energy use in agriculture"),
sidebarLayout(
sidebarPanel(
sliderInput(
"year",
label = "choose the year range",
min = years[1],
max = years[2],
value = years,
step = 1
),
pickerInput(
"country",
label = "choose the country",
choices = countries,
selected = "Afghanistan",
options = list(`actions-box` = TRUE),
multiple = T
),
selectInput(
"element",
label = "choose the element",
choices = elements,
selected = "Consumption in Agriculture"
),
selectInput(
"item",
label = "choose the item",
choices = items,
selected = "Electricity"
)
),
mainPanel(plotOutput("trend"))
)
)
runApp()
years <- range(energy$Year)
runApp()
runApp()
filtered_one
library("dplyr")
library("tidyr")
library("ggplot2")
energy <- read.csv("data/FAOSTAT_data_3-7-2019.csv",stringsAsFactors = F)
energy[is.na(energy)] <- 0
unique(energy$Unit)
energy <- energy %>%
filter(Unit != "million kWh")
#View(energy)
server <- function(input,output){
filtered <- reactive({
data <- energy %>%
filter(Year >= input$year[1], Year <= input$year[2])%>%
filter(Element == input$element)%>%
filter(Country %in% input$country)%>%
filter(Item == input$item)
data
})
filtered_one <- reactive({
data_a <- filtered()%>%
group_by(Year)%>%
summarise(Value = sum(Value))
data_a
})
output$trend <- renderPlot({
p <- ggplot(data = filtered_one(), mapping = aes_string( x = "Year", y = "Value")) +
geom_point()+
geom_line()+
scale_x_continuous(breaks = c(2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012))
p
})
}
#test<- energy%>%
# filter(Year %in% c(2000,2001,2002))%>%
# filter(Element == "Consumption in Agriculture")%>%
# filter(Country %in% c("Australia","China"))%>%
# filter(Item == "Electricity")
#is.character(unique(test$Unit))
#is.character(a)
#test
#test2 <- test%>%
# select(Year,Unit,Value)%>%
# group_by(Year)
# summarise(Value = sum(Value))
#View(test2)
#p <- ggplot(data = test,mapping = aes(x = Year,y = sum(Value)))+
#geom_point()
#p
test<- energy%>%
filter(Year %in% c(2000,2001,2002))%>%
filter(Element == "Consumption in Agriculture")%>%
filter(Country %in% c("Australia","China"))%>%
filter(Item == "Electricity")
test2 <- test%>%
# select(Year,Unit,Value)%>%
group_by(Year)
View(test2)
runApp()
library("dplyr")
library("tidyr")
library("ggplot2")
energy <- read.csv("data/FAOSTAT_data_3-7-2019.csv",stringsAsFactors = F)
energy[is.na(energy)] <- 0
unique(energy$Unit)
energy <- energy %>%
filter(Unit != "million kWh")
runApp()
energy <- read.csv("data/FAOSTAT_data_3-7-2019.csv",stringsAsFactors = F)
energy[is.na(energy)] <- 0
unique(energy$Unit)
energy <- energy %>%
filter(Unit != "million kWh")
View(energy)
server <- function(input,output){
filtered <- reactive({
data <- energy %>%
filter(Year >= input$year[1], Year <= input$year[2])%>%
filter(Element == input$element)%>%
filter(Country %in% input$country)%>%
filter(Item == input$item)
data
})
filtered_one <- reactive({
data_a <- filtered()%>%
group_by(Year)%>%
summarise(Value = sum(Value))
data_a
})
output$trend <- renderPlot({
p <- ggplot(data = filtered_one(), mapping = aes_string( x = "Year", y = "Value")) +
geom_point()+
geom_line()+
scale_x_continuous(breaks = c(2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012))
p
})
}
runApp()
#test2 <- test%>%
# select(Year,Unit,Value)%>%
#  group_by(Year)
# summarise(Value = sum(Value))
View(test2)
test2 <- test%>%
group_by(Year)%>%
summarise(Value = sum(Value))
View(test2)
#View(energy)
Unit <- energy%>%
select(Year,Unit)
Unit
test<- energy%>%
filter(Year %in% c(2000,2001,2002))%>%
filter(Element == "Consumption in Agriculture")%>%
filter(Country %in% c("Australia","China"))%>%
filter(Item == "Electricity")
View(test)
test2 <- test%>%
group_by(Year)%>%
filter(n()=1)
test2 <- test%>%
group_by(Year)%>%
filter(n() < 2)
test2
View(test2)
tbl <- table(test$Year) == n
n <- 1
tbl <- table(test$Year) == n
NewDataFrame <- subset(test, Column %in% names(tbl)[tbl])
NewDataFrame <- subset(test, Year %in% names(tbl)[tbl])
View(NewDataFrame)
n <- 2
tbl <- table(test$Year) < n
NewDataFrame <- subset(test, Year %in% names(tbl)[tbl])
View(NewDataFrame)
#View(test)
#is.character(unique(test$Unit))
#is.character(a)
View(test)
test2 <- test%>%
group_by(Year)%>%
summarise(Value = sum(Value),Unit = Unit)
test2 <- test%>%
group_by(Year)%>%
summarise(Value = sum(Value),Unit)
test2 <- test%>%
group_by(Year)%>%
summarise(Unit)
test2 <- test%>%
group_by(Year)%>%
summarise(Value = sum(Value), Unit = unique(Unit))
View(test2)
runApp()
runApp()
runApp()
runApp()
library("dplyr")
library("tidyr")
library("ggplot2")
runApp()
runApp()
runApp()
View(test2)
data_a[Unit]
test2[Unit]
unique(test2$Unit)
runApp()
runApp()
runApp()
unique(energy$Unit)
runApp()
runApp()
runApp()
